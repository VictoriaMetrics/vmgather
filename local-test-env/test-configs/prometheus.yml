# Prometheus config for scraping VM components and generating test data
global:
  scrape_interval: 10s

scrape_configs:
  # Scrape vmsingle-noauth metrics
  - job_name: 'vmsingle-noauth'
    static_configs:
      - targets: ['vmsingle-noauth:8428']
        labels:
          env: 'test'
          cluster: 'single-noauth'

  # Scrape vmsingle-auth metrics
  - job_name: 'vmsingle-auth'
    static_configs:
      - targets: ['vmsingle-auth:8428']
        labels:
          env: 'test'
          cluster: 'single-auth'

  # Scrape vmselect metrics
  - job_name: 'vmselect'
    static_configs:
      - targets: ['vmselect:8481']
        labels:
          env: 'test'
          cluster: 'vm-cluster'
          component: 'vmselect'

  # Scrape vminsert metrics
  - job_name: 'vminsert'
    static_configs:
      - targets: ['vminsert:8480']
        labels:
          env: 'test'
          cluster: 'vm-cluster'
          component: 'vminsert'

  # Scrape vmstorage metrics
  - job_name: 'vmstorage'
    static_configs:
      - targets: ['vmstorage-1:8482', 'vmstorage-2:8482']
        labels:
          env: 'test'
          cluster: 'vm-cluster'
          component: 'vmstorage'

  # Scrape vmagent metrics
  - job_name: 'vmagent'
    static_configs:
      - targets: ['vmagent:8430']
        labels:
          env: 'test'
          cluster: 'vm-cluster'
          component: 'vmagent'

  # Scrape vmauth metrics
  - job_name: 'vmauth-single'
    static_configs:
      - targets: ['vmauth-single:8427']
        labels:
          env: 'test'
          cluster: 'single-auth'
          component: 'vmauth'

  - job_name: 'vmauth-cluster'
    static_configs:
      - targets: ['vmauth-cluster:8426']
        labels:
          env: 'test'
          cluster: 'vm-cluster'
          component: 'vmauth'

  # Custom test jobs (non-VM installation data)
  - job_name: 'test1'
    static_configs:
      - targets: ['test-data-generator:9090']
        labels:
          env: 'test'
          source: 'custom'

  - job_name: 'test2'
    static_configs:
      - targets: ['test-data-generator:9090']
        labels:
          env: 'test'
          source: 'custom'

